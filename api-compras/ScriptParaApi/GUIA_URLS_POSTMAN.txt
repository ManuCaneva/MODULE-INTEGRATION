â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸš€ GUÃA DE URLs PARA PROBAR LA API DE COMPRAS EN POSTMAN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ IMPORTANTE: Ejecuta PRIMERO "Get Keycloak Token" para autenticarte.
   El token se guarda automÃ¡ticamente en {{TOKEN}} y expira en 5 minutos.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” PASO 1: AUTENTICACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¶ Get Keycloak Token â­ (HACER PRIMERO)
   POST http://localhost:8080/realms/ds-2025-realm/protocol/openid-connect/token
   
   Body (x-www-form-urlencoded):
   - client_id: grupo-04
   - client_secret: 6be1bec1-9472-499f-ab37-883d78f57829
   - grant_type: client_credentials
   - scope: productos:read
   
   âœ… Resultado: Token guardado en {{TOKEN}} automÃ¡ticamente


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ PASO 2: PRODUCTOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¶ Listar todos los productos
   GET http://localhost/compras/api/product/

â–¶ Ver producto especÃ­fico (cambiar el 1 por el ID que quieras)
   GET http://localhost/compras/api/product/1/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ›’ PASO 3: CARRITO (Flujo Completo)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¶ Ver carrito vacÃ­o (inicio)
   GET http://localhost/compras/api/shopcart/

â–¶ Agregar producto al carrito
   POST http://localhost/compras/api/shopcart/
   
   Body (JSON):
   {
     "productId": 1,
     "quantity": 2
   }

â–¶ Agregar otro producto
   POST http://localhost/compras/api/shopcart/
   
   Body (JSON):
   {
     "productId": 2,
     "quantity": 1
   }

â–¶ Ver carrito con items
   GET http://localhost/compras/api/shopcart/

â–¶ Actualizar cantidad de un producto (cambiar el 1 por el productId)
   PUT http://localhost/compras/api/shopcart/1/
   
   Body (JSON):
   {
     "quantity": 5
   }

â–¶ Eliminar un producto especÃ­fico del carrito (cambiar el 1 por el productId)
   DELETE http://localhost/compras/api/shopcart/1/

â–¶ Vaciar carrito completamente
   DELETE http://localhost/compras/api/shopcart/clear/

â–¶ Hacer CHECKOUT (crear pedido desde carrito) â­
   POST http://localhost/compras/api/shopcart/checkout
   
   Body (JSON):
   {
     "direccion_envio": "Calle Falsa 123, Resistencia, Chaco, Argentina",
     "metodo_pago": "tarjeta",
     "tipo_transporte": "domicilio"
   }


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ PASO 4: HISTORIAL DE PEDIDOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¶ Ver historial completo de pedidos
   GET http://localhost/compras/api/shopcart/history

â–¶ Ver detalle del pedido (cambiar el 1 por el ID del pedido)
   GET http://localhost/compras/api/shopcart/history/1

â–¶ Cancelar pedido (cambiar el 1 por el ID del pedido)
   DELETE http://localhost/compras/api/shopcart/history/1


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ PASO 5: GESTIÃ“N AVANZADA DE PEDIDOS (API de Pedidos)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¶ Listar todos los pedidos
   GET http://localhost/compras/api/pedidos/

â–¶ Ver detalle completo de un pedido (cambiar el 1 por el ID del pedido)
   GET http://localhost/compras/api/pedidos/1/

â–¶ Crear pedido manualmente (sin usar carrito)
   POST http://localhost/compras/api/pedidos/
   
   Body (JSON):
   {
     "direccion_envio": {
       "nombre_receptor": "Juan PÃ©rez",
       "calle": "Av. 9 de Julio 123",
       "ciudad": "Resistencia",
       "provincia": "Chaco",
       "codigo_postal": "3500",
       "pais": "Argentina",
       "telefono": "+54 362 4123456"
     },
     "tipo_transporte": "domicilio",
     "detalles": [
       {
         "producto_id": 1,
         "nombre_producto": "Laptop Dell XPS 13",
         "cantidad": 1,
         "precio_unitario": 1299.99
       },
       {
         "producto_id": 2,
         "nombre_producto": "Mouse Logitech",
         "cantidad": 2,
         "precio_unitario": 25.50
       }
     ]
   }

â–¶ Confirmar pedido (âš ï¸ Requiere API de LogÃ­stica - cambiar el 1 por el ID del pedido)
   POST http://localhost/compras/api/pedidos/1/confirmar/
   
   Body (JSON):
   {
     "tipo_transporte": "road"
   }

â–¶ Cancelar pedido (cambiar el 1 por el ID del pedido)
   POST http://localhost/compras/api/pedidos/1/cancelar/

â–¶ Crear tracking para pedido (âš ï¸ Requiere API de LogÃ­stica - cambiar el 1 por el ID)
   POST http://localhost/compras/api/pedidos/1/tracking/
   
   Body (JSON):
   {
     "tipo_transporte": "road"
   }

â–¶ Ver tracking del envÃ­o (cambiar el 1 por el ID del pedido)
   GET http://localhost/compras/api/pedidos/1/tracking/

â–¶ Ver historial de pedidos (alias de /api/shopcart/history)
   GET http://localhost/compras/api/pedidos/history/

â–¶ Ver detalle de pedido desde historial (cambiar el 1 por el ID del pedido)
   GET http://localhost/compras/api/pedidos/1/history-detail/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ FLUJO RÃPIDO DE PRUEBA (Orden Recomendado)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1.  POST   Get Keycloak Token (autenticaciÃ³n)
2.  GET    List products (ver productos disponibles)
3.  POST   Add item to cart (productId: 1, quantity: 2)
4.  POST   Add item to cart (productId: 2, quantity: 1)
5.  GET    Get cart (verificar carrito)
6.  POST   Checkout (crear pedido)
7.  GET    Order history (ver pedido creado)
8.  GET    Get order by id (detalle del pedido)
9.  POST   Confirm order (âš ï¸ SOLO si tienes API de LogÃ­stica)
10. GET    Get tracking (âš ï¸ SOLO si confirmaste el pedido)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ NOTAS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”¸ AutenticaciÃ³n:
   - El token expira en 5 minutos
   - Si recibes error 401, vuelve a ejecutar "Get Keycloak Token"
   - El token se guarda automÃ¡ticamente en {{TOKEN}}

ğŸ”¸ Headers necesarios:
   - Authorization: Bearer {{TOKEN}}
   - Content-Type: application/json

ğŸ”¸ Modo Mock (USE_MOCK_APIS=true):
   - NO requiere APIs de Stock ni LogÃ­stica
   - Productos con precios ficticios
   - NO usar endpoints /confirmar/ ni /tracking/

ğŸ”¸ IDs en URLs:
   - Cambiar el nÃºmero segÃºn corresponda
   - Ejemplo: /api/shopcart/1/ â†’ cambiar 1 por el productId deseado

ğŸ”¸ Docker:
   - Verifica que estÃ© corriendo: docker compose ps
   - Si cambias configuraciÃ³n: docker compose restart django


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ RESUMEN DE ENDPOINTS POR CATEGORÃA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AUTENTICACIÃ“N:
  POST   http://localhost:8080/realms/ds-2025-realm/protocol/openid-connect/token

PRODUCTOS:
  GET    http://localhost/compras/api/product/
  GET    http://localhost/compras/api/product/{id}/

CARRITO:
  GET    http://localhost/compras/api/shopcart/
  POST   http://localhost/compras/api/shopcart/
  PUT    http://localhost/compras/api/shopcart/{productId}/
  DELETE http://localhost/compras/api/shopcart/{productId}/
  DELETE http://localhost/compras/api/shopcart/clear/
  POST   http://localhost/compras/api/shopcart/checkout

HISTORIAL:
  GET    http://localhost/compras/api/shopcart/history
  GET    http://localhost/compras/api/shopcart/history/{id}
  DELETE http://localhost/compras/api/shopcart/history/{id}

PEDIDOS:
  GET    http://localhost/compras/api/pedidos/
  POST   http://localhost/compras/api/pedidos/
  GET    http://localhost/compras/api/pedidos/{id}/
  POST   http://localhost/compras/api/pedidos/{id}/confirmar/
  POST   http://localhost/compras/api/pedidos/{id}/cancelar/
  POST   http://localhost/compras/api/pedidos/{id}/tracking/
  GET    http://localhost/compras/api/pedidos/{id}/tracking/
  GET    http://localhost/compras/api/pedidos/history/
  GET    http://localhost/compras/api/pedidos/{id}/history-detail/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ TIPS PARA POSTMAN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Variables de colecciÃ³n:
   - {{BASE_URL_COMPRAS}} = http://localhost/compras
   - {{TOKEN}} = (se autocompleta al ejecutar Get Keycloak Token)

âœ… ConfiguraciÃ³n de Auth:
   - A nivel de colecciÃ³n: Bearer Token con {{TOKEN}}
   - No necesitas configurar auth en cada request individual

âœ… Para cambiar Body JSON:
   - PestaÃ±a "Body"
   - Seleccionar "raw"
   - Seleccionar "JSON" en el dropdown

âœ… Guardar respuestas:
   - Click en "Save Response" para comparar resultados

âœ… Importar colecciÃ³n:
   - File â†’ Import â†’ Seleccionar portal-compras.postman_collection.json


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ†˜ TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ Error 401 Unauthorized:
   â†’ Volver a ejecutar "Get Keycloak Token" (el token expirÃ³)

âŒ Error 404 Not Found:
   â†’ Verificar que la URL estÃ© correcta (con o sin / al final)
   â†’ Verificar que el ID exista

âŒ Error 500 Internal Server Error:
   â†’ Revisar logs de Docker: docker compose logs django

âŒ Error 502 Bad Gateway (al confirmar pedido):
   â†’ API de LogÃ­stica no estÃ¡ disponible
   â†’ Usar modo mock (USE_MOCK_APIS=true)
   â†’ No usar endpoints /confirmar/ ni /tracking/

âŒ Connection refused:
   â†’ Docker no estÃ¡ corriendo: docker compose up -d


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ CONTACTO Y SOPORTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Si tienes dudas o problemas:
1. Revisa los logs: docker compose logs django
2. Verifica el estado: docker compose ps
3. Reinicia el servicio: docker compose restart django
4. Consulta la documentaciÃ³n Swagger: http://localhost/compras/api/docs/


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ Â¡Ã‰xitos con las pruebas!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
